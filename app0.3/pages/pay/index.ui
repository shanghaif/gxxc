<!---->
<template>
  <ui-page style="overflow-y: hidden;">
    <ui-nav-bar slot="nav-bar" custom-style="{{ {'color':'#fff','background-color':'#26a2ff'} }}">
      <ui-row height="46">
        <ui-col vertical-align="middle" align="center" width="60" bindtap="navigateBack">
          <ui-view class="nav_left">
              <ui-icon type="left1" font-size="24"></ui-icon>
          </ui-view>
        </ui-col>
        <ui-col vertical-align="middle" align="center">
          <ui-view class="nav_title">缴费</ui-view>
        </ui-col>
        <ui-col vertical-align="middle" align="center" width="60">
        </ui-col>
      </ui-row>
    </ui-nav-bar>
    <ui-view class="box_col"  style="{{ { height: pageHeight(0)+ 'px'} }}">

        <ui-view class="payMess box_row">
              <ui-view class="box_row_100">
                  支付金额 
              </ui-view>
              <ui-view>
                  {{money}}元
              </ui-view>
        </ui-view>
        <ui-view class="butSty">
            <ui-button bindtap="paymoney" >立即支付</ui-button>
        </ui-view>

    </ui-view>
<!-- 支付页面 -->
  </ui-page>
</template>

<script>
export default {
  config: {
    "navigationStyle": 'custom',
    navigationBarBackgroundColor:"#26a2ff",
    navigationBarTextStyle:"white",
    navigationBarTitleText:"缴费",
    title:'缴费',
    backgroundColor:'#f2f2f2',
    delay:false,//延迟加载
  },
  data() {
    return {
      money:ui.getApp().payMess.money,
    }
  },
  methods: {
    navigateBack(){
      ui.navigateTo(
          {
            url:'/pages/product/index'
          }
        )
    },
    paymoney(){
      ui.showToast({ title: '支付'})

      // ui.request({
      //   url: 'http://192.168.31.92:8080/pub/appPay', //仅为示例，并非真实的接口地址
      //   data: {},
      //   method:'POST',
      //   header: {
      //     'Content-Type': 'application/x-www-form-urlencoded'
      //   },
      //   success: function (res) {
      //     console.log('数据请求',res.data)
      //     this.WxPay()
      //   }
      // })

    },
    WxPay(){
      ui.requestPayment({
          target: 'wxpay',
          statement: {
              "appId":'wxb01394ea85904296',     //公众号名称，由商户传入
              "timeStamp":v.payMess.timeStamp,         //时间戳，自1970年以来的秒数
              "nonceStr":v.payMess.nonceStr, //随机串
              "package":v.payMess.package,  //
              "signType":v.payMess.signType,         //微信签名方式：
              "paySign":v.payMess.paySign //微信签名
          },
          success: function() {
              console.log('支付成功')
          },
          fail: function() {
              console.log('支付失败')
          }
      })
    },
  },
  mounted() {},
  created () {
    console.log(ui.getApp().payMess);
    
  }
}
</script>

<style lang="less">
    .payMess{
      margin: 15rpx 0;
      background: #fff;
      padding: 25rpx 25rpx;
      font-size: 28rpx;
      font-weight: 600;
    }
    .butSty{
      margin: 25rpx 0;
      .ui-button{
        background-color: #fc9153;
        color: #fff;
        border: none;
        font-size: 32rpx;
        font-weight: 700;
        padding: 8rpx 0;
      }
    }
</style>
